<!Doctype html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <title>Photons</title>
</head>

<body>
    <!-- Image and text -->
    <nav class="navbar bg-dark">
        <div class="container-fluid justify-content-md-center">
            <a class="navbar-brand " href="index.html">
                <img src="https://upload.wikimedia.org/wikipedia/commons/7/7f/Port_Authority_Allegheny_County_Logo.svg"
                    height="50" class="d-inline-block align-top" alt="">
            </a>
        </div>
    </nav>

    <div class="container" style="padding: 2%">
        <div class="row">
            <div class="col-4 border">
                <div class="inline">
                    Indoor Temperature:
                </div>
                <div class="inline">
                    <h1 id="indoorTemp">30°F</h1>
                </div>
                <div class="inline">
                    Outdoor Temperature:
                </div>
                <div class="inline">
                    <h1 id="outdoorTemp">23°F</h1>
                </div>
                <div class="inline">
                    <h4>Comfort Level:</h4>
                    <h4 style="color: red">Low</h4>
                </div>
            </div>
            <div class="col-6 border">
                    <div id="chart_div" style="width: 100%; height: 300px;"></div>
            </div>
            <div class="col border">
                <h4>Savings:</h4>
                <h5>Having this setting will cost you $2300.</h5>                
                <h6 id = "monthSavings" style="color: green">This will result in a savings of $1000 for this month.</h6>
            </div>
        </div>

            <div class="row justify-content-md-center">
                <h1>Impact of keeping this indoor temperature for all months:</h1>
                <h4 id="yearSavings" style="color:green">This will result in a savings of $10000 per year</h4>
                <img id="totalImpact"
                    src="https://2aih25gkk2pi65s8wfa8kzvi-wpengine.netdna-ssl.com/ged/files/2017/02/Line-graph-e1487040553537.jpg">
            </div>
        
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <!--Chart script-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function getData(){

        //if garage 1
        var d = [
          ['Month', 'BTU', 'BTUNew'],
          ['January',  3902000000, calc(avgTemps["Jan"])],
          ['February',  2614000000, calc(avgTemps["Feb"])],
          ['March',  1081000000, calc(avgTemps["Mar"])],
          ['April',  1698000000, calc(avgTemps["Apr"])],
          ['May',  361000000, calc(avgTemps["May"])],
          ['June',  12000000, calc(avgTemps["Jun"])],
          ['July',  11000000, calc(avgTemps["Jul"])],
          ['August',  14000000, calc(avgTemps["Aug"])],
          ['September',  24000000, calc(avgTemps["Sep"])],
          ['October',  65000000, calc(avgTemps["Oct"])],
          ['November',  1308000000, calc(avgTemps["Nov"])],
          ['December',  2126000000, calc(avgTemps["Dec"])]
        ];

        //if garage 2
        var d = [
          ['Month', 'BTU', 'BTUNew'],
          ['January',  7721000000, 25527],
          ['February',  5140000000, 17094],
          ['March',  6239000000, 20685],
          ['April',  3315000000, 11165],
          ['May',  873000000, 3163],
          ['June',  6000000, 320],
          ['July',  5000000, 309],
          ['August',  12000000, 332],
          ['September',  157000000, 805],
          ['October',  1114000000, 3854],
          ['November',  3442000000, 10903],
          ['December',  4333000000, 13320]
        ];

        //if garage 3

        //if garage 4


        return d;
      }
      function drawChart() {
        var d = getData();

        var data = google.visualization.arrayToDataTable(d);

        

        var options = {
          title: 'Gas Usage',
          hAxis: {title: 'Month',  titleTextStyle: {color: '#333'}},
          vAxis: {minValue: 0}
        };

        var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }

      function calc(t1) {
        var t2 = Number(getParameterByName("t2"));
        // var t1 = getParameterByName("t1");
        t1 = Number(t1);
        var g = getParameterByName("g");
        var Qdot, A;
        if(g == "1"){
            Qdot = 19042.24;
            A = 111039.9164;
        } else if(g == "2"){
            Qdot =  79923.71;
            A = 111039.9164;
        } else if(g == "3"){
            Qdot = 58219.51;
            A = 111039.9164;
        } else if(g == "4"){
            Qdot = 77157.75;
            A = 111039.9164;
        }
        var qs = 0.4 * A * (t2 - t1);
        var qv = Qdot * 0.24 * 0.075 * (t2 - t1) * 60 * 30 * 24;
        var btu = (qs + qv) / 0.85;
        return btu;
      }

      function getParameterByName(name) {
            url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

            var avgTemps = JSON.parse("{\"Jan\": \"25.5\",\"Feb\": \"38.8\",\"Mar\": \"34.8\",\"Apr\": \"46.3\",\"May\": \"69\",\"Jun\": \"70.8\",\"Jul\": \"73.5\",\"Aug\": \"73\",\"Sep\": \"69.7\",\"Oct\": \"53.4\",\"Nov\": \"37.3\",\"Dec\": \"35.3\"}");
    </script>
</body>