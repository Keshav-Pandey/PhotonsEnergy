<!Doctype html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <title>Photons</title>
</head>

<body>
    <!-- Image and text -->
    <nav class="navbar bg-dark">
        <div class="container-fluid justify-content-md-center">
            <a class="navbar-brand " href="index.html">
                <img src="https://upload.wikimedia.org/wikipedia/commons/7/7f/Port_Authority_Allegheny_County_Logo.svg"
                    height="50" class="d-inline-block align-top" alt="">
            </a>
        </div>
    </nav>

    <div class="container" style="padding: 2%">
        <div class="row">
            <div class="col-4 border">
                <div class="inline">
                    Indoor Temperature:
                </div>
                <div class="inline">
                    <h1 id="indoorTemp">30°F</h1>
                </div>
                <div class="inline">
                    Outdoor Temperature:
                </div>
                <div class="inline">
                    <h1 id="outdoorTemp">23°F</h1>
                </div>
                <div class="inline">
                    <h4>Comfort Level:</h4>
                    <h4 style="color: red">Low</h4>
                </div>
            </div>
            <div class="col-6 border">
                    <div id="chart_div" style="width: 100%; height: 300px;"></div>
            </div>
            <div class="col border">
                <h4>Savings:</h4>
                <h5>Having this setting will cost you $2300.</h5>                
                <h6 id = "monthSavings" style="color: green">This will result in a savings of $1000 for this month.</h6>
            </div>
        </div>

            <div class="row justify-content-md-center">
                <h1>Impact of keeping this indoor temperature for all months:</h1>
                <h4 id="yearSavings" style="color:green">This will result in a savings of $10000 per year</h4>
                <img id="totalImpact"
                    src="https://2aih25gkk2pi65s8wfa8kzvi-wpengine.netdna-ssl.com/ged/files/2017/02/Line-graph-e1487040553537.jpg">
            </div>
        
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <!--Chart script-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function getData(){

        //if garage 1
        var d = [
          ['Month', 'BTU', 'BTUNew'],
          ['January',  3902000000, calc(avgTemps["Jan"])],
          ['February',  2614000000, calc(avgTemps["Feb"])],
          ['March',  1081000000, calc(avgTemps["Mar"])],
          ['April',  1698000000, calc(avgTemps["Apr"])],
          ['May',  361000000, calc(avgTemps["May"])],
          ['June',  12000000, calc(avgTemps["Jun"])],
          ['July',  11000000, calc(avgTemps["Jul"])],
          ['August',  14000000, calc(avgTemps["Aug"])],
          ['September',  24000000, calc(avgTemps["Sep"])],
          ['October',  65000000, calc(avgTemps["Oct"])],
          ['November',  1308000000, calc(avgTemps["Nov"])],
          ['December',  2126000000, calc(avgTemps["Dec"])]
        ];

        //if garage 2
        var d2 = [
          ['Month', 'BTU', 'BTUNew'],
          ['January',  7721000000, calc(avgTemps["Jan"])],
          ['February',  5140000000, calc(avgTemps["Feb"])],
          ['March',  6239000000, calc(avgTemps["Mar"])],
          ['April',  3315000000, calc(avgTemps["Apr"])],
          ['May',  873000000, calc(avgTemps["May"])],
          ['June',  6000000, calc(avgTemps["Jun"])],
          ['July',  5000000, calc(avgTemps["Jul"])],
          ['August',  12000000, calc(avgTemps["Aug"])],
          ['September',  157000000, calc(avgTemps["Sep"])],
          ['October',  1114000000, calc(avgTemps["Oct"])],
          ['November',  3442000000, calc(avgTemps["Nov"])],
          ['December',  4333000000, calc(avgTemps["Dec"])]
        ];

        //if garage 3

        //if garage 4


        return d;
      }
      function drawChart() {
        var d = getData();

        var data = google.visualization.arrayToDataTable(d);

        

        var options = {
          title: 'Gas Usage',
          hAxis: {title: 'Month',  titleTextStyle: {color: '#333'}},
          vAxis: {minValue: 0}
        };

        var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }

      function calc(t1) {
        var t2 = Number(getParameterByName("t2"));
        // var t1 = getParameterByName("t1");
        t1 = Number(t1);
        var g = getParameterByName("g");
        var Qdot, A;
        if(g == "1"){
            Qdot = 19042.24;
            A = 111039.9164;
        } else if(g == "2"){
            Qdot =  79923.71;
            A = 111039.9164;
        } else if(g == "3"){
            Qdot = 58219.51;
            A = 111039.9164;
        } else if(g == "4"){
            Qdot = 77157.75;
            A = 111039.9164;
        }
        deltaT = t2 - t1;
        if(deltaT < 0)
            deltaT = 0;
        var qs = 0.4 * A * deltaT;
        var qv = Qdot * 0.24 * 0.075 * deltaT * 60 * 30 * 24;
        var btu = (qs + qv) / 0.85;
        return btu;
      }

      function calcPrice(t1, rate) {
        return calc(t1) * rate;
      }

      function getMonthData() {
        var m = getParameterByName("m");
        var g = getParameterByName("g");
        var gar;
        if(g == "1"){
            gar = gar1[m];
        } else if(g == "2"){
            gar = gar2[m];
        } else if(g == "3"){
            gar = gar3[m];
        } else if(g == "4"){
            gar = gar4[m];
        }
        //if garage 1
        var d = [
          ['Month', 'BTU' , 'BTUNew', 'Price', 'PriceNew'],
          [m,  gar["BTU"], calc(avgTemps[m]), gar["Amount"], calcPrice(avgTemps[m],gar["Rate"])]
        ];
        return d;
      }

      function getParameterByName(name) {
            url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        var avgTemps = JSON.parse("{\"Jan\": \"25.5\",\"Feb\": \"38.8\",\"Mar\": \"34.8\",\"Apr\": \"46.3\",\"May\": \"69\",\"Jun\": \"70.8\",\"Jul\": \"73.5\",\"Aug\": \"73\",\"Sep\": \"69.7\",\"Oct\": \"53.4\",\"Nov\": \"37.3\",\"Dec\": \"35.3\"}");
        var gar1 = {"Jan":{"BTU":3902000000,"Amount":9856.452,"Rate":0.000002526},"Feb":{"BTU":2614000000,"Amount":6678.77,"Rate":0.000002555},"Mar":{"BTU":1081000000,"Amount":2895.999,"Rate":0.000002679},"Apr":{"BTU":1698000000,"Amount":4426.686,"Rate":0.000002607},"May":{"BTU":361000000,"Amount":1120.183,"Rate":0.000003103},"Jun":{"BTU":12000000,"Amount":260.424,"Rate":0.000021702},"Jul":{"BTU":11000000,"Amount":260.612,"Rate":0.000023692},"Aug":{"BTU":14000000,"Amount":268.058,"Rate":0.000019147},"Sep":{"BTU":24000000,"Amount":292.92,"Rate":0.000012205},"Oct":{"BTU":65000000,"Amount":401.57,"Rate":0.000006178},"Nov":{"BTU":1308000000,"Amount":3543.372,"Rate":0.000002709},"Dec":{"BTU":2126000000,"Amount":5457.442,"Rate":0.000002567}};
        var gar2 = {"Jan":{"BTU":7721000000,"Amount":25527.62,"Rate":0.00000330626},"Feb":{"BTU":5140000000,"Amount":17094.44,"Rate":0.00000332577},"Mar":{"BTU":6239000000,"Amount":20685.33,"Rate":0.00000331549},"Apr":{"BTU":3315000000,"Amount":11165.9,"Rate":0.0000033683},"May":{"BTU":873000000,"Amount":3163.33,"Rate":0.00000362352},"Jun":{"BTU":6000000,"Amount":320.75,"Rate":0.0000534583},"Jul":{"BTU":5000000,"Amount":309.74,"Rate":0.000061948},"Aug":{"BTU":12000000,"Amount":332.62,"Rate":0.0000277183},"Sep":{"BTU":157000000,"Amount":805.6,"Rate":0.00000513121},"Oct":{"BTU":1114000000,"Amount":3854.2,"Rate":0.00000345978},"Nov":{"BTU":3442000000,"Amount":10903.56,"Rate":0.0000031678},"Dec":{"BTU":4333000000,"Amount":13320.92,"Rate":0.00000307429}};
        var gar3 = {"Jan":{"BTU":5717000000,"Amount":18979.75,"Rate":0.00000331988},"Feb":{"BTU":4120000000,"Amount":13761.7,"Rate":0.00000334022},"Mar":{"BTU":3835000000,"Amount":12830.49,"Rate":0.00000334563},"Apr":{"BTU":3118000000,"Amount":10518.72,"Rate":0.00000337355},"May":{"BTU":1041000000,"Amount":3714.14,"Rate":0.00000356786},"Jun":{"BTU":80000000,"Amount":563.37,"Rate":0.00000704213},"Jul":{"BTU":28000000,"Amount":384.25,"Rate":0.0000137232},"Aug":{"BTU":26000000,"Amount":378.28,"Rate":0.0000145492},"Sep":{"BTU":133000000,"Amount":727.31,"Rate":0.0000054685},"Oct":{"BTU":594000000,"Amount":2204.78,"Rate":0.00000371175},"Nov":{"BTU":2309000000,"Amount":7628.17,"Rate":0.00000330367},"Dec":{"BTU":3363000000,"Amount":10976.27,"Rate":0.00000326383}};
        var gar4 = {"Jan":{"BTU":7691000000,"Amount":25429.6,"Rate":0.00000330641},"Feb":{"BTU":5003000000,"Amount":16646.81,"Rate":0.00000332737},"Mar":{"BTU":5136000000,"Amount":17081.38,"Rate":0.00000332581},"Apr":{"BTU":3084000000,"Amount":10408.48,"Rate":0.00000337499},"May":{"BTU":521000000,"Amount":2009.25,"Rate":0.00000385653},"Jun":{"BTU":0,"Amount":0,"Rate":0},"Jul":{"BTU":0,"Amount":0,"Rate":0},"Aug":{"BTU":0,"Amount":0,"Rate":0},"Sep":{"BTU":4000000,"Amount":306.52,"Rate":0.00007663},"Oct":{"BTU":366000000,"Amount":1466.18,"Rate":0.00000400596},"Nov":{"BTU":3074000000,"Amount":9905.16,"Rate":0.00000322224},"Dec":{"BTU":4561000000,"Amount":13939.49,"Rate":0.00000305624}};
    </script>
</body>