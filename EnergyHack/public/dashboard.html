<!Doctype html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <title>Photons</title>
</head>

<body>
    <!-- Image and text -->
    <nav class="navbar bg-dark">
        <div class="container-fluid justify-content-md-center">
            <a class="navbar-brand " href="index.html">
                <img src="https://upload.wikimedia.org/wikipedia/commons/7/7f/Port_Authority_Allegheny_County_Logo.svg"
                    height="50" class="d-inline-block align-top" alt="">
            </a>
        </div>
    </nav>

    <div class="container" style="padding: 2%">
        <div class="row">
            <div class="col-4 border">
                <div class="inline">
                    Indoor Temperature:
                </div>
                <div class="inline">
                    <h1 id="indoorTemp">30°F</h1>
                </div>
                <div class="inline">
                    Outdoor Temperature:
                </div>
                <div class="inline">
                    <h1 id="outdoorTemp">23°F</h1>
                </div>
                <div class="inline">
                    <h4>Comfort Level:</h4>
                    <h4 style="color: red">Low</h4>
                </div>
            </div>
            <div class="col-6 border">

            </div>
            <div class="col border">
                <h4>Savings:</h4>
                <h5>Having this setting will cost you $2300.</h5>
                <h6 id="monthSavings" style="color: green">This will result in a savings of $1000 for this month.</h6>
            </div>
        </div>

        <div class="row justify-content-md-center">
            <h1>Impact of keeping this indoor temperature for all months:</h1>
            <h4 id="yearSavings" style="color:green">This will result in a savings of $10000 per year</h4>
            <div class="container" style="align-content: center; margin-left:10%">
                <div class="form-check-inline">
                    <div class="col border">
                        <div id="chart_div" style="width: 100%; height: 400px;"></div>
                    </div>
                    <div class="col border">
                        <div id="chart_div1" style="width: 100%; height: 400px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <!--Chart script-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        
        function getData() {
            var d;
            var g = getParameterByName("g");

            //if garage 1
            if (g == "1") {
                d = [
                    ['Month', 'BTU', 'BTUNew'],
                    ['January', 3902000000, calc(avgTemps["Jan"])],
                    ['February', 2614000000, calc(avgTemps["Feb"])],
                    ['March', 1081000000, calc(avgTemps["Mar"])],
                    ['April', 1698000000, calc(avgTemps["Apr"])],
                    ['May', 361000000, calc(avgTemps["May"])],
                    ['June', 12000000, calc(avgTemps["Jun"])],
                    ['July', 11000000, calc(avgTemps["Jul"])],
                    ['August', 14000000, calc(avgTemps["Aug"])],
                    ['September', 24000000, calc(avgTemps["Sep"])],
                    ['October', 65000000, calc(avgTemps["Oct"])],
                    ['November', 1308000000, calc(avgTemps["Nov"])],
                    ['December', 2126000000, calc(avgTemps["Dec"])]
                ];
            }

            //if garage 2
            if (g == "2") {
                d = [
                    ['Month', 'BTU', 'BTUNew'],
                    ['January', 7721000000, calc(avgTemps["Jan"])],
                    ['February', 5140000000, calc(avgTemps["Feb"])],
                    ['March', 6239000000, calc(avgTemps["Mar"])],
                    ['April', 3315000000, calc(avgTemps["Apr"])],
                    ['May', 873000000, calc(avgTemps["May"])],
                    ['June', 6000000, calc(avgTemps["Jun"])],
                    ['July', 5000000, calc(avgTemps["Jul"])],
                    ['August', 12000000, calc(avgTemps["Aug"])],
                    ['September', 157000000, calc(avgTemps["Sep"])],
                    ['October', 1114000000, calc(avgTemps["Oct"])],
                    ['November', 3442000000, calc(avgTemps["Nov"])],
                    ['December', 4333000000, calc(avgTemps["Dec"])]
                ];
            }

            //if garage 3
            if (g == "3") {
                d = [
                    ['Month', 'BTU', 'BTUNew'],
                    ['January', 5717000000, calc(avgTemps["Jan"])],
                    ['February', 4120000000, calc(avgTemps["Feb"])],
                    ['March', 3835000000, calc(avgTemps["Mar"])],
                    ['April', 3118000000, calc(avgTemps["Apr"])],
                    ['May', 1041000000, calc(avgTemps["May"])],
                    ['June', 80000000, calc(avgTemps["Jun"])],
                    ['July', 28000000, calc(avgTemps["Jul"])],
                    ['August', 26000000, calc(avgTemps["Aug"])],
                    ['September', 133000000, calc(avgTemps["Sep"])],
                    ['October', 594000000, calc(avgTemps["Oct"])],
                    ['November', 2309000000, calc(avgTemps["Nov"])],
                    ['December', 3363000000, calc(avgTemps["Dec"])]
                ];
            }

            //if garage 4
            if (g == "4") {
                d = [
                    ['Month', 'BTU', 'BTUNew'],
                    ['January', 7691000000, calc(avgTemps["Jan"])],
                    ['February', 5003000000, calc(avgTemps["Feb"])],
                    ['March', 5136000000, calc(avgTemps["Mar"])],
                    ['April', 3084000000, calc(avgTemps["Apr"])],
                    ['May', 521000000, calc(avgTemps["May"])],
                    ['June', 0, calc(avgTemps["Jun"])],
                    ['July', 0, calc(avgTemps["Jul"])],
                    ['August', 0, calc(avgTemps["Aug"])],
                    ['September', 4000000, calc(avgTemps["Sep"])],
                    ['October', 366000000, calc(avgTemps["Oct"])],
                    ['November', 3074000000, calc(avgTemps["Nov"])],
                    ['December', 4561000000, calc(avgTemps["Dec"])]
                ];
            }
            return d;
        }
        function drawChart() {
            var d = getData();

            var data = google.visualization.arrayToDataTable(d);



            var options = {
                title: 'Gas Usage',
                hAxis: { title: 'Month', titleTextStyle: { color: '#333' } },
                vAxis: { minValue: 0 }
            };

            var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
            var chart1 = new google.visualization.AreaChart(document.getElementById('chart_div1'));
            chart.draw(data, options);
            chart1.draw(data, options);
        }

        function calc(t1) {
            var t2 = Number(getParameterByName("t2"));
            // var t1 = getParameterByName("t1");
            t1 = Number(t1);
            var g = getParameterByName("g");
            var Qdot, A;
            if (g == "1") {
                Qdot = 19042.24;
                A = 111039.9164;
            } else if (g == "2") {
                Qdot = 79923.71;
                A = 111039.9164;
            } else if (g == "3") {
                Qdot = 58219.51;
                A = 111039.9164;
            } else if (g == "4") {
                Qdot = 77157.75;
                A = 111039.9164;
            }
            deltaT = t2 - t1;
            if (deltaT < 0)
                deltaT = 0;
            var qs = 0.4 * A * deltaT;
            var qv = Qdot * 0.24 * 0.075 * deltaT * 60 * 30 * 24;
            var btu = (qs + qv) / 0.85;
            return btu;
        }

        function getParameterByName(name) {
            url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        var avgTemps = JSON.parse("{\"Jan\": \"25.5\",\"Feb\": \"38.8\",\"Mar\": \"34.8\",\"Apr\": \"46.3\",\"May\": \"69\",\"Jun\": \"70.8\",\"Jul\": \"73.5\",\"Aug\": \"73\",\"Sep\": \"69.7\",\"Oct\": \"53.4\",\"Nov\": \"37.3\",\"Dec\": \"35.3\"}");
    </script>
</body>